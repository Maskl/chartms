(function(){var a,b,c,d,e,f,g,h,i,j;window.translates=window.translates||{},google.load("visualization","1",{packages:["corechart","table"]}),e=function(a){return $("#alert_placeholder").html('<div class="alert alert-danger"><a class="close" data-dismiss="alert">×</a><span>'+a+"</span></div>")},g=function(a){return $("#alert_placeholder").html('<div class="alert alert-warning"><a class="close" data-dismiss="alert">×</a><span>'+a+"</span></div>")},f=function(a){return $("#alert_placeholder").html('<div class="alert alert-success"><a class="close" data-dismiss="alert">×</a><span>'+a+"</span></div>")},a=function(a,b){var c,d,e;return c=[],e=0,d=new Firebase(a),d.on("child_added",function(a){return c[a.name()]=a.val(),e++,setTimeout(function(){return e--,0>=e?b(c,a,d):void 0},100)})},$(document).ready(function(){return $(".logout").on("click",function(){return window.auth.logout(),window.location="index.html",f(window.translates.logoutSuccess||"Successfully logout")}),$(".sign-in-btn").on("click",function(){var a,b,c;return a=$(".sign-in-email").val(),b=$(".sign-in-password").val(),c=$(".sign-in-remember")[0].checked,window.waitingForLogin=!0,window.auth.login("password",{email:a,password:b,rememberMe:c}),!1}),google.setOnLoadCallback(function(){return i()})}),i=function(){var a;return window.waitingForLogin=!1,a=new Firebase(window.firebaseBase),window.auth=new FirebaseSimpleLogin(a,function(a,b){if(a)return e(window.translates.incorectLogin||"Incorect login data"),console.log("Login error!",a);if(b){if($("#auth-footer-text").html((window.translates.loggedInFooterLinksStart||"Logged in as")+b.email+(window.translates.loggedInFooterLinksEnd||", <a href='admin.html'>Admin panel</a>, ")),$(".logout, .admin").show(),window.waitingForLogin)return window.waitingForLogin=!1,window.location="admin.html"}else if($("#auth-footer-text").html(window.translates.loggedOutFooterLinks||"<a href='login.html'>Admin panel</a>"),$(".logout, .admin").hide(),-1!==window.location.pathname.indexOf("admin.html"))return window.location="login.html"}),-1!==window.location.pathname.indexOf("index.html")&&j(),-1!==window.location.pathname.indexOf("admin.html")?h():void 0},h=function(){return a(window.firebaseTexts,function(a,b,c){return d(a,b,c)})},d=function(a,b,c){var d,e;for(d in a)e=a[d],$("#edit_text_"+d+" input[type=text]").val(e),$("#edit_text_"+d+" textarea").html(e);return $(".edit-text-btn").on("click",function(a){var b;return b=$(a.target).parent(),d=b.attr("id").substr(10),e=b.find("input[type=text]").val(),e||(e=tinyMCE.get("mce_"+d).getContent()),$(a.target).text(window.translates.saving||"Saving..."),c.child(d).set(e,function(){return $(a.target).text(window.translates.save||"Save")}),!1}),tinymce.init({selector:"textarea",plugins:["advlist autolink lists link image charmap print preview anchor","searchreplace visualblocks code fullscreen","insertdatetime media table contextmenu paste"],toolbar:"insertfile undo redo | styleselect | bold italic | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | link image"})},j=function(){return b(),window.appOnStart(),a(window.firebaseTexts,function(b,d){return c(b,d),a(window.firebaseData,function(a,b){return window.appOnDataLoaded(a,b)})})},c=function(a){var b,c,d;d=[];for(b in a)c=a[b],c=c.replace(/{{(.*?)}}/g,'<span id="$1"></span>'),c=c.replace(/\[\[(.*?)\]\]/g,'<div id="$1"></div>'),d.push($("#text_"+b).html(c));return d},b=function(){var a,b,c,d;c=window.translations,d=[];for(a in c)b=c[a],window.translates[a]=b,d.push($(".translate-"+a).html(b));return d}}).call(this);